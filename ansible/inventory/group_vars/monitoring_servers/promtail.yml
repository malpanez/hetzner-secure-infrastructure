---
# Promtail Configuration for Monitoring Servers

# Deployment control
deploy_promtail: true

# Version
promtail_version: "latest"

# Loki connection
promtail_loki_url: "http://localhost:3100/loki/api/v1/push"

# Log sources to scrape
promtail_scrape_nginx: true
promtail_scrape_php: true
promtail_scrape_mariadb: true
promtail_scrape_wordpress: true
promtail_scrape_syslog: true
promtail_scrape_auth: true
promtail_scrape_fail2ban: true

# Log file paths (adjust if needed)
promtail_nginx_access_log: "/var/log/nginx/access.log"
promtail_nginx_error_log: "/var/log/nginx/error.log"
promtail_php_fpm_log: "/var/log/php*.fpm.log"
promtail_mariadb_error_log: "/var/log/mysql/error.log"
promtail_mariadb_slow_log: "/var/log/mysql/slow.log"
promtail_wordpress_debug_log: "/var/www/html/wp-content/debug.log"
promtail_syslog: "/var/log/syslog"
promtail_auth_log: "/var/log/auth.log"
promtail_fail2ban_log: "/var/log/fail2ban.log"

# Logrotate
promtail_logrotate_enabled: true
promtail_logrotate_size: "50M"
promtail_logrotate_rotate: 7
promtail_logrotate_compress: true

# Firewall (only localhost)
promtail_firewall_allowed_ips:
  - "127.0.0.1"
  - "::1"
