# Grafana Datasources Provisioning
# Generated by Ansible - Do not edit manually

apiVersion: 1

datasources:
{% for datasource in grafana_datasources %}
  - name: {{ datasource.name }}
    type: {{ datasource.type }}
    access: {{ datasource.access | default('proxy') }}
    url: {{ datasource.url }}
    isDefault: {{ datasource.is_default | default(false) | lower }}
    editable: {{ datasource.editable | default(true) | lower }}
{% if datasource.basic_auth is defined %}
    basicAuth: {{ datasource.basic_auth.enabled | default(false) | lower }}
{% if datasource.basic_auth.enabled | default(false) %}
    basicAuthUser: {{ datasource.basic_auth.user }}
    secureJsonData:
      basicAuthPassword: {{ datasource.basic_auth.password }}
{% endif %}
{% endif %}
{% if datasource.json_data is defined %}
    jsonData:
{{ datasource.json_data | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}
{% if datasource.secure_json_data is defined %}
    secureJsonData:
{{ datasource.secure_json_data | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}
{% endfor %}

deleteDatasources: []
