# Systemd Mount Unit for /tmp
# Managed by Ansible - security_hardening role
# Location: /etc/systemd/system/tmp.mount
#
# Purpose: Mount /tmp as tmpfs with security hardening options
# - noexec: Prevent execution of binaries
# - nodev: Prevent device files
# - nosuid: Prevent setuid/setgid bits
# - strictatime: Update access times for security auditing
# - size: Limit tmpfs size to prevent DoS

[Unit]
Description=Temporary Directory /tmp
ConditionPathIsSymbolicLink=!/tmp
DefaultDependencies=no
Conflicts=umount.target
Before=local-fs.target umount.target
After=swap.target

[Mount]
What=tmpfs
Where=/tmp
Type=tmpfs
Options=mode=1777,strictatime,noexec,nodev,nosuid,size={{ security_hardening_tmp_size | default('2G') }}

[Install]
WantedBy=local-fs.target
