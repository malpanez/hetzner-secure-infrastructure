---
# Valkey Role - Validation Tasks

- name: Valkey | Validate | Check Valkey service status
  ansible.builtin.systemd:
    name: "{{ valkey_service_name }}"
  register: valkey_service_status
  tags: [valkey, validate]

- name: Valkey | Validate | Display Valkey service status
  ansible.builtin.debug:
    msg: "Valkey service is {{ valkey_service_status.status.ActiveState }}"
  tags: [valkey, validate]

- name: Valkey | Validate | Test Valkey connectivity
  ansible.builtin.command: valkey-cli ping
  register: valkey_ping
  changed_when: false
  failed_when: valkey_ping.stdout != "PONG"
  tags: [valkey, validate]
