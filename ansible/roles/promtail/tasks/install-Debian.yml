---
# Promtail Role - Debian/Ubuntu Installation Tasks

- name: Promtail | Install | Add Grafana APT repository (DEB822)
  ansible.builtin.deb822_repository:
    name: grafana
    types: [deb]
    uris: https://apt.grafana.com
    suites: stable
    components: [main]
    signed_by: "{{ promtail_gpg_key_url }}"
    state: present
  tags: [promtail, packages]

- name: Promtail | Install | Install Promtail and dependencies
  ansible.builtin.apt:
    name: "{{ promtail_apt_dependencies + ['promtail'] }}"
    state: present
    update_cache: true
  tags: [promtail, packages]
